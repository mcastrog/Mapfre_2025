# cspell: disable=devspaces
schemaVersion: 2.2.2
metadata:
  name: summit25-demo

components:

  - name: tooling-container
    container:
      image: quay.io/devspaces/ansible:latest
      memoryRequest: 256M
      memoryLimit: 6Gi
      cpuRequest: 250m
      cpuLimit: 2000m
      args: ['tail', '-f', '/dev/null']
      env:
        - name: 'ANSIBLE_COLLECTIONS_PATH'
          value: '~/.ansible/collections:/usr/share/ansible/collections:/projects/ansible-devspaces-demo/collections'
        - name: 'KUBEDOCK_ENABLED'
          value: "true"
commands:

  - id: setup-git
    exec:
      component: tools
      commandLine: |
        git config --global user.name "${GIT_COMMITTER_NAME}" && \
        git config --global user.email "${GIT_COMMITTER_EMAIL}" && \
        git config --global credential.helper store && \
        echo "https://${GIT_TOKEN}:@github.com" > ~/.git-credentials